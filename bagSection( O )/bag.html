<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Bag</title>
    <link rel="stylesheet" href="../styles/bag.css" />
    <link rel="stylesheet" href="../styles/index.css" />
    <link rel="stylesheet" href="../styles/modal.css" />
    <link rel="stylesheet" href="../styles/login.css" />
    <link rel="stylesheet" href="../styles/signUp.css" />
  </head>
  <body>
    <div class="header"></div>
    <div id="applyCoupon" class="modal">
      <div class="modal-content">
        <span class="close">&times;</span>
        <div id="applyCouponContainer"></div>
      </div>
    </div>

    <div class="empty-cart"></div>
    <div class="bag-container">
      <div class="bag-container-left">
        <div class="bag-container-left-change-address"></div>
        <div class="bag-container-left-available-offer">
          <h3>
            <img
              src="data:image/png;base64,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"
            />
            Available Offer
          </h3>
          <p>
            . 10% Instant Discount on SBI Credit Cards on a minimum spend of Rs
            3000. TCA<br />
            <span id="tca"></span><span id="more"></span>
          </p>
          <button class="btnStyle" id="myBtn">Show More</button>
        </div>
        <div class="bag-container-left-bag-items">
          <div class="bag-container-left-bag-items-count">
            <div id="count-of-items"></div>
            <div class="remove-and-wishlist">
              <h5 id="emptyCart">REMOVE ALL</h5>
              <h5>|</h5>
              <h5 id="moveToWishList">MOVE TO WISHLIST</h5>
            </div>
          </div>
          <div class="bag-lists"></div>
        </div>
      </div>
      <div class="bag-container-right">
        <div class="bag-container-right-coupons">
          <h4>COUPONS</h4>
          <div class="bag-container-right-coupons-bar">
            <div>
              <img
                src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSy_dQUFj_6hq_DJ_yQXpaHh5u3SFJfYpOo7_1ijnxgE-3iY_dlmJvK_7y4Gc6idcZpCeI&usqp=CAU"
              />
              <h4>Apply Coupons</h4>
            </div>
            <button class="btnStyle" id="openApplyCouponModal">APPLY</button>
          </div>
        </div>
        <div class="bag-container-right-gifting">
          <h4>GIFTING & PERSONALISATION</h4>
          <div class="bag-container-right-gifting-div1">
            <img src="../images/gift-big.webp" alt="" />
            <div>
              <h5>Buying for a loved one?</h5>
              <h6>
                Gift wrap and personalised message on card,<br />Only for Rs.25
              </h6>
              <h5 class="themeColor">ADD GIFT WRAP</h5>
            </div>
          </div>
        </div>
        <div class="bag-container-right-price-details"></div>
      </div>
    </div>
    <div class="suggetion-container">
      <h3>Get Free Shipping by adding more:</h3>
      <div class="suggetion-container-filter-options">
        <button class="btnStyle">All</button>
        <button class="btnStyle">Caps</button>
        <button class="btnStyle">Shampoo And Conditioner</button>
        <button class="btnStyle">Sunglasses</button>
        <button class="btnStyle">Scarves</button>
      </div>
      <div class="suggetion-container-items"></div>
    </div>
  </body>
</html>

<script src="../scripts/applyCouponModal.js"></script>
<script src="../scripts/loginModal.js"></script>
<script src="../scripts/signUpModal.js"></script>
<script type="module">
  import {
    appendSuggestionData,
    appendCartData,
    showMore,
    displayNameAndAddress,
  } from "../scripts/bag.js";
  import header from "../components/header.js";
  import displayTotal from "../scripts/displayTotal.js";
  import calculateSubtotal from "../scripts/calculateSubtotal.js";

  document.querySelector(".header").innerHTML = header();

  let cartData = JSON.parse(localStorage.getItem("cartArr")) || [];

  document
    .querySelector("#moveToWishList")
    .addEventListener("click", function () {
      window.location.href = "../wishList( O )/wishList.html";
    });
  document.querySelector("#emptyCart").addEventListener("click", function () {
    let cartData = [];
    localStorage.setItem("cartArr", JSON.stringify(cartData));
    window.location.href = "";
  });
  if (cartData.length !== 0) {
    let suggestionData = [
      {
        title: "MANCODE",
        img: "https://assets.myntassets.com/q_95,w_172,c_limit,f_webp,fl_progressive/assets/images/productimage/2021/3/18/9d72cd96-4288-457d-bfd1-fd85b904a7fd1616054183218-1.jpg",
        desc: "Men Pre-Shave Balm",
        price: "Rs: 249",
        maxprice: 350,
        discount: "Rs.101 OFF",
      },
      {
        title: "Fantraa",
        img: "https://assets.myntassets.com/q_95,w_172,c_limit,f_webp,fl_progressive/assets/images/productimage/2021/5/25/d8b0685c-08e8-425f-972d-2871793024a01621931515125-1.jpg",
        desc: "Activated Charcoal Facewash",
        price: "Rs: 200",
        maxprice: 250,
        discount: "20% OFF",
      },
      {
        title: "Fantraa",
        img: "https://assets.myntassets.com/q_95,w_172,c_limit,f_webp,fl_progressive/assets/images/productimage/2021/6/15/5a1c276a-c581-47e9-95cd-f2e74cef48d21623755631551-1.jpg",
        desc: "Men Beard & Hair Fragrance...",
        price: "Rs: 227",
        maxprice: 350,
        discount: "35% OFF",
      },
      {
        title: "Jewel Junction",
        img: "https://assets.myntassets.com/q_95,w_172,c_limit,f_webp,fl_progressive/assets/images/productimage/2019/6/12/c2685f41-3d68-4c64-9918-5c0aa223c63e1560313429001-1.jpg",
        desc: "Geometric Cufflinks",
        price: "Rs: 413",
        maxprice: 1799,
        discount: "77% OFF",
      },
      {
        title: "Romeo Rossi",
        img: "https://assets.myntassets.com/q_95,w_172,c_limit,f_webp,fl_progressive/assets/images/productimage/2019/7/24/887fec3a-87fb-44f0-82dc-7126c58408af1563914904029-1.jpg",
        desc: "Pack of 3 Ankle-length Socks",
        price: "Rs: 315",
        maxprice: 450,
        discount: "30% OFF",
      },
      {
        title: "UrbanMooch",
        img: "https://assets.myntassets.com/q_95,w_172,c_limit,f_webp,fl_progressive/assets/images/15039506/2021/8/5/3ec9a2da-45ca-4043-add0-d8f7afff72511628151732763ArganShampoo100ml1.jpg",
        desc: "Argan Shampoo 100ml",
        price: "Rs: 224",
        maxprice: 350,
        discount: "36% OFF",
      },
      {
        title: "Tistabene",
        img: "https://assets.myntassets.com/q_95,w_172,c_limit,f_webp,fl_progressive/assets/images/12078638/2020/7/17/4617e9ea-849a-438d-9635-b86422fe95051594993966934-Swag-Vala-Bhai-Hindi-English-Design-Name-Rakhi-3161594993965-1.jpg",
        desc: "Swag Wala Bhai Rakhi",
        price: "Rs: 399",
        maxprice: "",
        discount: "",
      },
      {
        title: "Jewel Junction",
        img: "https://assets.myntassets.com/q_95,w_172,c_limit,f_webp,fl_progressive/assets/images/7056275/2018/7/31/9a004784-430d-4bec-9b93-4ba1e421dbf31533019910542-na-8551533019910409-1.jpg",
        desc: "Round Cufflinks",
        price: "Rs: 383",
        maxprice: 1599,
        discount: "76% OFF",
      },
    ];
    localStorage.setItem("cartArr", JSON.stringify(cartData));
    localStorage.setItem("suggetionArr", JSON.stringify(suggestionData));

    displayNameAndAddress(
      "Shubham Marne",
      "H.No.72113,Dropathi Chaya Compound , Purna Village, Thane,Bhiwandi,Bhiwandi",
      "421302"
    );

    appendCartData(cartData);
    appendSuggestionData(suggestionData);

    document.querySelector("#myBtn").addEventListener("click", () => {
      showMore();
    });

    document.querySelector("#more").innerHTML = `<br/>
      . 5% Unlimited Cashback on Flipkart Axis Bank Ctedit Card TCA<br /><br />
                  . 10% Cashback upto Rs 250 on a minimum spend of Rs 1500 with
                  PayZapp TCA<br /><br />
                  . Upto Rs 500 Cashback on Mobikwik wallet transaction of min Rs
                  999. Use code MBK500 on mobikwik TCA<br /><br />
                  . Flat Rs 200 Cashback on first Airtel Payments Bank transcation
                  on myntra on a min spend of Rs 2000 TCA`;

    displayTotalItems(cartData);

    function displayTotalItems(arr) {
      document.querySelector("#count-of-items").innerHTML = `<h4>
        <span>TOTAL ITEMS : ${arr.length}</span>
      </h4>`;
    }

    let couponVar = localStorage.getItem("isCouponApplied");
    let totalItems, subTotalInRs;

    let qtyArr = JSON.parse(localStorage.getItem("qtyArr")) || [];

    let itemQty = document.querySelectorAll("#item-qty");
    itemQty.forEach(function (elem, i) {
      qtyArr[i] = +elem.value;
      localStorage.setItem("qtyArr", JSON.stringify(qtyArr));
    });
    itemQty.forEach(function (elem, i) {
      elem.addEventListener("change", function () {
        qtyArr[i] = +elem.value;
        localStorage.setItem("qtyArr", JSON.stringify(qtyArr));
        discountSection(cartData);
      });
    });

    discountSection(cartData);

    function discountSection(arr) {
      totalItems = cartData.length;
      subTotalInRs = calculateSubtotal(cartData, qtyArr);
      document.querySelector(".bag-container-right-price-details").innerHTML =
        displayTotal(totalItems, subTotalInRs, couponVar);
    }

    document
      .querySelector("#remove-coupon")
      .addEventListener("click", function () {
        localStorage.setItem("isCouponApplied", "false");
        window.location.href = "";
      });
    let addToCart = document.querySelectorAll("#addToCart");
    addToCart.forEach(function (e, i) {
      e.addEventListener("click", function () {
        cartData.push(suggestionData[i]);
        localStorage.setItem("cartArr", JSON.stringify(cartData));
        window.location.href = "";
      });
    });

    let removeFromCart = document.querySelectorAll("#removeFromCart");
    removeFromCart.forEach(function (elem, i) {
      elem.addEventListener("click", function () {
        console.log(cartData);
        cartData.splice(i, 1);
        localStorage.setItem("cartArr", JSON.stringify(cartData));
        window.location.href = "";
      });
    });
  } else {
    document.querySelector(".bag-container").style.display = "none";
    document.querySelector(".suggetion-container").style.display = "none";
    document.querySelector(".empty-cart").style.display = "flex";
    document.querySelector(".empty-cart").innerHTML = ` <img
          src="https://constant.myntassets.com/checkout/assets/img/empty-bag.webp"
        />
        <h2>Hey, it feels so light!</h2>
        <h4>There is nothing in your bag. Let's add some items.</h4>
        <a href="../wishList( O )/wishList.html"><button class="btnStyle">ADD ITEMS FROM WISHLIST</button></a>`;
    console.log("Nothing in cart");
  }
</script>
